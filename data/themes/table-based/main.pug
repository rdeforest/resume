- var bodyClass = [ format ]
- var addr      = contact.addr
- var emailUrl  = "mailto:" + contact.email

mixin recursiveList(l)
  if l
    ul
      each item in l
        if typeof(item) === 'string'
          li #{item}
        else
          +recursiveList(item)

doctype html

html
  head
    title Resume of #{contact.name}
    style
      include ./style/style.css

  body(class=bodyClass)
    div
      // Header: Name and contact on one line
      div#contact
        h2= contact.name
        span.contact-details
          a(href=emailUrl) #{contact.email}
          |  â€¢
          span= contact.phone

      // Intro paragraph
      if intro
        div#intro= intro

      // Keywords table - compact
      div#keywords
        table#categories
          thead
            tr
              th(colspan=Object.keys(keywords).length) A Few Of My Favorite ...
            tr
              each category, categoryName in keywords
                th.category-name #{categoryName}
          tbody
            - var maxLength = Math.max(...Object.values(keywords).map(arr => arr.length))
            - for (var i = 0; i < maxLength; i++)
              tr
                each category, categoryName in keywords
                  td.keyword-item= category[i] || ''

      // Single job history table with timeline sidebar
      div#experience
        table#positions
          each job in positions
            tr.position
              td.timeline
                if job.from
                  div.dates #{job.to}
                  div.dash  -
                  div.dates #{job.from}

              td.job-content
                div.company #{job.company}

                if job.group
                  div.group #{job.group}

                if job.title
                  div.title #{job.title}

                if job.summary
                  div.summary= job.summary

                if job.delivered
                  +recursiveList(job.delivered)

      // div#footer
      //   div Updated #{updated}
      //   div Generated #{generated}
